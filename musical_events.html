<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"> 
		<title>
			Musical Events
		</title>
		<style>
			body {
				background-color: white;
				font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
			}

			table {
				font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
				border-collapse: collapse;
			}

			td{
				border: 1px solid #ddd;
				padding: 5px;
			}

			tr:nth-child(even){background-color: #f2f2f2;}

			tr:hover {background-color: #ddd;}

			th {
				background-color: #33FFD4;
				border: 1px solid #ddd;
				padding: 5px;	
			}

			img {
				height:24px
			}
		</style>
	</head>
	<body>
		  <p id = "p_bands">
				<table>
					<tr>
						<th>Bands</th>
						<th>Contries</th>
						<th>Generes</th>
						<th>Events</th>
					</tr>
					<tr>
						<td>
							<button onclick="showAllBands()">All Bands</button>
						</td>
						<td>
							<button id="allContries" onClick = "showAllCountries()">All Countries</button>
						</td>
						<td>
							<button id="allGeneres" onClick = "showAllGeneres()">All Generes</button>
						</td>
						<td>
							<button id="allEvents" onClick = "showAllEvents()">All Events</button>
						</td>
					</tr>
					<tr>
						<td>
							<select id="selectBandId" name = "selectBandName" onChange = "showBand()"></select>
						</td>
						<td>
							<select id="selectCountryId" name = "selectCountryName" onChange = "showBandByCountry()"></select>
						</td>
						<td>
							<select id="selectGenereId" name = "selectGenereName" onChange = "showBandByGenere()"></select>
						</td>
						<td>
							<select id="selectEventId" name = "selectEventName" onChange = "showBandByEvent()"></select>
						</td>
					</tr>
				</table>				 			  			  
		  </p>
		  <p id = "allInfo"></p>
		  <p id="bands_info"></p>
		  <p id="generes_events"></p>		  
		  		   
		  <script src="js/jsonBands.js"></script> 
		  <script src="js/jsonGeneres.js"></script> 
		  <script src="js/jsonCountries.js"></script>  
		  <script src="js/jsonEvents.js"></script>
		  <script src="js/jsonBandsGeneres.js"></script> 
		  <script src="js/jsonBandsCountries.js"></script>  
		  <script src="js/jsonBandsEvents.js"></script> 
		  <script src="js/functions_to_load_data.js"></script>
		  <script>
			  var objBands = loadBands();
			  var objGeneres = loadGeneres();
			  var objCountries = loadCountries();
			  var objEvents = loadEvents();	
			  var objBandsGeneres = loadBandsGeneres();
			  var objBandsCountries = loadBandsCountries();
			  var objBandsEvents = loadBandsEvents();
			  
			  var allBands = objBands.bands.length;
			  var allEvents = objEvents.events.length;
			  
			  document.getElementById('allInfo').innerHTML = '<b>Viewed Bands: </b>' + allBands + 
				  '<br> <b> Events: </b>' + allEvents;		  
			  
			  var selectDrpDwnBand = document.getElementById('selectBandId');
			  var selectDrpDwnGenere = document.getElementById('selectGenereId');
			  var selectDrpDwnCountry = document.getElementById('selectCountryId');
			  var selectDrpDwnEvent = document.getElementById('selectEventId');
			  
			  selectDrpDwnBand.innerHTML = '<option value = "void" selected>Select Band</option>';
			  for(b of objBands.bands){
				selectDrpDwnBand.innerHTML = selectDrpDwnBand.innerHTML + 
				  '<option value = "' + b['id_band'] + '">' +
				  b['band'] + '</option>';
			  }
			  
			  selectDrpDwnGenere.innerHTML = '<option value = "void" selected>Select Genere</option>';
			  for(g of objGeneres.generes){
				selectDrpDwnGenere.innerHTML = selectDrpDwnGenere.innerHTML + 
				  '<option value = "' + g['id_genere'] + '">' +
				  g['genere'] + '</option>';
			  }
			  
			  selectDrpDwnCountry.innerHTML = '<option value = "void" selected>Select Country</option>';
			  for(c of objCountries.countries){
				selectDrpDwnCountry.innerHTML = selectDrpDwnCountry.innerHTML + 
				  '<option value = "' + c['id_country'] + '">' +
				  c['country'] + '</option>';
			  }
			  
			  selectDrpDwnEvent.innerHTML = '<option value = "void" selected>Select Event</option>';
			  for(e of objEvents.events){
				selectDrpDwnEvent.innerHTML = selectDrpDwnEvent.innerHTML + 
				  '<option value = "' + e['id_event'] + '">' +
				  e['event'] + '</option>';
			  }		  
		  	
			  function allVoid(){
			  	document.getElementById('bands_info').innerHTML = "";
				document.getElementById('generes_events').innerHTML = "";
			  }
		</script>
		<script src="js/functions_to_show_all_entities.js"></script>
		<script src="js/function_to_show_band.js"></script>
		<script src="js/functions_to_show_bands_by_entities.js"></script>
		<script>
			function bandsTable(bandId){								
				var tb = document.createElement('table');
				
				var thBand = document.createElement('th');
				var thFlag = document.createElement('th');
				var thCountry = document.createElement('th');
				var thGenere = document.createElement('th');
				var thEvent = document.createElement('th');
				var thLike = document.createElement('th');

				thBand.appendChild(document.createTextNode('Band'));
				thFlag.appendChild(document.createTextNode('Flag'));
				thCountry.appendChild(document.createTextNode('Country'));
				thGenere.appendChild(document.createTextNode('Generes'));
				thEvent.appendChild(document.createTextNode('Events'));
				thLike.appendChild(document.createTextNode('Like'));

				var trh = document.createElement('tr');
				
				trh.appendChild(thBand);
				trh.appendChild(thFlag);
				trh.appendChild(thCountry);
				trh.appendChild(thGenere);
				trh.appendChild(thEvent);
				trh.appendChild(thLike);
				
				tb.appendChild(trh);
				
				var stop = false;
			for(b of bandId){
				for(i = 0; i < objBands.bands.length && !stop; i++)
					if (objBands.bands[i].id_band == b){
						stop = true;
						
						var tr = document.createElement('tr');
				  		  
						var tdBand = document.createElement('td');
						var tdFlag = document.createElement('td');
						var tdCountry = document.createElement('td');
						var tdGenere = document.createElement('td');
						var tdEvent = document.createElement('td');
						var tdLike = document.createElement('td');

						var bFlag = document.createElement('img');
						bFlag.src = "4x3/" + objBands.bands[i].flag + ".png";
						var bLike = document.createElement('img');
						bLike.src = "likes/" + objBands.bands[i].likes + ".png";

						tdBand.appendChild(document.createTextNode(objBands.bands[i].band));
						tdFlag.appendChild(bFlag);
						tdCountry.appendChild(document.createTextNode(objBands.bands[i].country));
						tdGenere.appendChild(document.createTextNode(objBands.bands[i].generes));
						tdEvent.appendChild(document.createTextNode(objBands.bands[i].events));
						tdLike.appendChild(bLike);
						
						tr.appendChild(tdBand);
						tr.appendChild(tdFlag);
						tr.appendChild(tdCountry);
						tr.appendChild(tdGenere);
						tr.appendChild(tdEvent);
						tr.appendChild(tdLike);
						
						tb.appendChild(tr);
					}
				stop = false;
			}
			document.getElementById('bands_info').appendChild(tb);
		  }
		  
		function showGenereOfBand(generesOfBand){
			tdGeneres = document.createElement('td');
			for(gob of generesOfBand)
				for(g of objGeneres.generes)
					if(g['id_genere'] == gob){
						tdGeneres.appendChild(document.createTextNode(g['genere']));
						tdGeneres.appendChild(document.createElement('br'));
					}
			return tdGeneres;
		}
				
		function showEventOfBand(eventsOfBand){
			tdEvents = document.createElement('td');
			for(eob of eventsOfBand)
				for(e of objEvents.events)
					if(e['id_event'] == eob){
						tdEvents.appendChild(document.createTextNode(e['event']));
						tdEvents.appendChild(document.createElement('br'));
					}
			return tdEvents;
		}
		</script>
	</body>
</html>
